(self.webpackChunkreact_scheduler=self.webpackChunkreact_scheduler||[]).push([[451],{"./src/stories/Agenda.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:()=>Basic,Functions:()=>Functions,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Agenda_stories});var dist=__webpack_require__("./node_modules/@storybook/test/dist/index.mjs"),react=__webpack_require__("./node_modules/react/index.js");const index_module_wrapper="Agenda_wrapper__yhXYy",header_module_wrapper="header_wrapper__gNjeI",header_module_container="header_container__Hm4NK",header_module_btnChangeDay="header_btnChangeDay__NH5Sy",header_module_btnChangeDayToday="header_btnChangeDayToday__H04Dw",header_module_agendaTextWrapper="header_agendaTextWrapper__E7C1l",header_module_agendaText="header_agendaText__4ZJu0",header_module_currentDate="header_currentDate__NhkQA",header_module_currentDateText="header_currentDateText__+CNiw";var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Header=_ref=>{let{startingPointTime,prevHandler,todayHandler,nextHandler}=_ref;return(0,jsx_runtime.jsx)("div",{className:header_module_wrapper,children:(0,jsx_runtime.jsxs)("div",{className:header_module_container,children:[(0,jsx_runtime.jsx)("div",{className:header_module_currentDate,children:(0,jsx_runtime.jsxs)("div",{className:header_module_currentDateText,children:[startingPointTime.clone().startOf("week").add(1,"day").format("D MMM")," - ",startingPointTime.clone().endOf("week").add(1,"day").format("D MMM YYYY")]})}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("button",{className:header_module_btnChangeDay,onClick:()=>prevHandler(),children:" < "}),(0,jsx_runtime.jsx)("button",{className:"".concat(header_module_btnChangeDay," ").concat(header_module_btnChangeDayToday),onClick:()=>todayHandler(),children:"Current week"}),(0,jsx_runtime.jsx)("button",{className:header_module_btnChangeDay,onClick:()=>nextHandler(),children:" > "})]}),(0,jsx_runtime.jsx)("div",{className:header_module_agendaTextWrapper,children:(0,jsx_runtime.jsx)("div",{className:header_module_agendaText,children:"Agenda"})})]})})};Header.__docgenInfo={description:"",methods:[],displayName:"Header"};var moment=__webpack_require__("./node_modules/moment/moment.js"),moment_default=__webpack_require__.n(moment);const cells_module_dayCellWrapper="cells_dayCellWrapper__C+vVB",cells_module_timelineCellWrapper="cells_timelineCellWrapper__VtBXX",cells_module_dayWrapper="cells_dayWrapper__KUNHe",cells_module_eventsWrapper="cells_eventsWrapper__a03Gf",event_module_eventWrapper="event_eventWrapper__0bsBI",event_module_eventPoint="event_eventPoint__e7orA",event_module_eventTitle="event_eventTitle__G2hwg",event_module_infoWrapper="event_infoWrapper__Zn5J2",event_module_infoItem="event_infoItem__RqZLt";const tooltip_module_tooltipContainer="tooltip_tooltipContainer__f4c5J",Tooltip=_ref=>{let{children,elementRef,parentRef}=_ref;const tooltipRef=(0,react.useRef)(null),{position,isVisible,onMouseEnter,onMouseLeave}=function useTooltip(_ref){var _position$top,_position$left,_position$width;let{elementRef,parentRef,tooltipRef}=_ref;const[isVisible,setIsVisible]=(0,react.useState)(!1),[position,setPosition]=(0,react.useState)({});(0,react.useEffect)((()=>{if(elementRef.current){if(isVisible){var _tooltipRef$current;const{left,width,bottom}=elementRef.current.getBoundingClientRect(),parentPos=parentRef.current.getBoundingClientRect();null==tooltipRef||null===(_tooltipRef$current=tooltipRef.current)||void 0===_tooltipRef$current||_tooltipRef$current.getBoundingClientRect().width,setPosition({top:bottom-parentPos.top-46,left,width})}isVisible||setPosition({})}}),[isVisible,elementRef]);const onMouseEnter=(0,react.useCallback)((()=>{setIsVisible(!0)}),[]),onMouseLeave=(0,react.useCallback)((()=>{setIsVisible(!1)}),[]);return{position:{top:null!==(_position$top=position.top)&&void 0!==_position$top?_position$top:0,left:null!==(_position$left=position.left)&&void 0!==_position$left?_position$left:0,width:null!==(_position$width=position.width)&&void 0!==_position$width?_position$width:0},isVisible,onMouseEnter,onMouseLeave}}({elementRef,parentRef,tooltipRef});return(0,react.useEffect)((()=>{const element=null==elementRef?void 0:elementRef.current;return element&&(element.addEventListener("mouseenter",onMouseEnter),element.addEventListener("mouseleave",onMouseLeave)),()=>{element&&(element.removeEventListener("mouseenter",onMouseEnter),element.removeEventListener("mouseleave",onMouseLeave))}}),[elementRef,onMouseEnter,onMouseLeave]),isVisible?(0,jsx_runtime.jsx)("div",{ref:tooltipRef,className:tooltip_module_tooltipContainer,style:{top:position.top,left:position.left},children}):null};Tooltip.__docgenInfo={description:"",methods:[],displayName:"Tooltip"};const Event=_ref=>{let{event,parentRef,openModal,onEventClick}=_ref;const eventRef=(0,react.useRef)(null);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)("div",{className:event_module_eventWrapper,onClick:()=>{openModal(event),onEventClick&&onEventClick(event)},ref:eventRef,children:[(0,jsx_runtime.jsx)("div",{className:event_module_eventPoint,style:{background:{high:"#E4717A",medium:"#E6D690",low:"#A8E4A0"}[event.priority]}}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:event_module_eventTitle,children:event.title}),(0,jsx_runtime.jsxs)("div",{className:event_module_infoWrapper,children:[(0,jsx_runtime.jsx)("div",{className:event_module_infoItem,children:event.allDay?(0,jsx_runtime.jsx)("div",{children:"All day"}):(0,jsx_runtime.jsxs)("div",{children:[moment_default()(event.start).format("HH:mm")," - ",moment_default()(event.end).format("HH:mm")]})}),(0,jsx_runtime.jsxs)("div",{className:event_module_infoItem,children:["Assignee: ",event.assignee]}),(0,jsx_runtime.jsxs)("div",{className:event_module_infoItem,children:["Priority: ",event.priority]})]})]})]})})};Event.__docgenInfo={description:"",methods:[],displayName:"Event"};const Cells=_ref=>{let{currentWeekEvents,startingPointTime,openModal,parentRef,onEventClick}=_ref;return(0,jsx_runtime.jsx)("div",{className:cells_module_dayCellWrapper,children:[...Array(7)].map(((_,i)=>{let currentDayEvents=null==currentWeekEvents?void 0:currentWeekEvents.filter((event=>moment_default()(event.start).isSame(startingPointTime.clone().startOf("week").add(i+1,"day"),"day")));if(currentDayEvents.length>0)return(0,jsx_runtime.jsxs)("div",{className:cells_module_timelineCellWrapper,children:[(0,jsx_runtime.jsx)("div",{className:cells_module_dayWrapper,children:moment_default()(currentDayEvents[0].start).format("D ddd")}),(0,jsx_runtime.jsx)("div",{className:cells_module_eventsWrapper,children:null==currentDayEvents?void 0:currentDayEvents.map(((event,i)=>(0,jsx_runtime.jsx)(Event,{event,parentRef,openModal,onEventClick})))})]})}))})};Cells.__docgenInfo={description:"",methods:[],displayName:"Cells"};var helpers=__webpack_require__("./src/utils/helpers.js"),modal=__webpack_require__("./src/components/Agenda/Modal/modal.js");function Agenda(_ref){let{events,onEventClick,onRangeChange,onTodayClick,onEventUpdate}=_ref;const[startingPointTime,setStartingPointTime]=(0,react.useState)(moment_default()()),[isShowModal,setShowModal]=(0,react.useState)(!1),[event,setEvent]=(0,react.useState)(null),parentRef=(0,react.useRef)(null),currentWeekEvents=null==events?void 0:events.filter((event=>(0,helpers.Fw)(event,startingPointTime)));return(0,jsx_runtime.jsxs)("div",{className:index_module_wrapper,ref:parentRef,children:[(0,jsx_runtime.jsx)(Header,{startingPointTime,prevHandler:()=>{setStartingPointTime((prev=>prev.clone().subtract(1,"week"))),onRangeChange&&onRangeChange(startingPointTime.clone().subtract(1,"week").startOf("isoWeek").format(),startingPointTime.clone().subtract(1,"week").endOf("isoWeek").format())},todayHandler:()=>{setStartingPointTime(moment_default()().subtract(1,"day")),onTodayClick&&onTodayClick(moment_default()().format())},nextHandler:()=>{setStartingPointTime((prev=>prev.clone().add(1,"week"))),onRangeChange&&onRangeChange(startingPointTime.clone().add(1,"week").startOf("isoWeek").format(),startingPointTime.clone().add(1,"week").endOf("isoWeek").format())}}),(0,jsx_runtime.jsx)(Cells,{currentWeekEvents,startingPointTime,openModal:event=>{setShowModal(!0),setEvent(event)},parentRef,onEventClick}),(0,jsx_runtime.jsx)(modal.a,{cancelButtonHandler:()=>{setShowModal(!1),setEvent(null)},isShowModal,event,changeEventHandler:(value,field)=>{setEvent((prevState=>({...prevState,[field]:value})))},updateEventHandler:()=>{let globalEventForUpdate=events.find((eventGlobal=>eventGlobal.id===event.id));globalEventForUpdate.title=event.title,globalEventForUpdate.start=event.start,globalEventForUpdate.end=event.end,globalEventForUpdate.allDay=event.allDay,globalEventForUpdate.assignee=event.assignee,globalEventForUpdate.priority=event.priority,onEventUpdate&&onEventUpdate(event),setShowModal(!1),setEvent(null)},modalView:"agenda"})]})}const components_Agenda=Agenda;Agenda.__docgenInfo={description:"",methods:[],displayName:"Agenda"};var blocks_dist=__webpack_require__("./node_modules/@storybook/blocks/dist/index.mjs");const agendaEvents=[{id:4,title:"Сделать уборку",start:new Date("2024-05-17T13:00"),end:new Date("2024-05-17T16:30"),assignee:"Samantha Bright",priority:"medium",allDay:!1,repeat:!0,resourceId:2},{id:41,title:"Купить овощей",start:new Date("2024-05-17T14:00"),end:new Date("2024-05-17T16:00"),assignee:"Samantha Bright",priority:"high",allDay:!1,repeat:!0,resourceId:2},{id:42,title:"Проверить почту",start:new Date("2024-05-17T08:00"),end:new Date("2024-05-17T08:40"),assignee:"Todd Hoffman",priority:"low",allDay:!1,repeat:!1,resourceId:1},{id:43,title:"Согласовать дизайн",start:new Date("2024-05-17T12:00"),end:new Date("2024-05-17T13:00"),assignee:"Todd Hoffman",priority:"high",allDay:!0,repeat:!1,resourceId:2},{id:5,title:"Сходить в филармонию",start:new Date("2024-05-21T20:00"),end:new Date("2024-05-21T22:30"),assignee:"John Heart",priority:"medium",allDay:!1,repeat:!1,resourceId:1},{id:6,title:"Пить много воды (целый день)",start:new Date("2024-05-20T17:00"),end:new Date("2024-05-20T17:30"),assignee:"John Heart",priority:"high",allDay:!0,repeat:!1,resourceId:1},{id:7,title:"Убраться в комнате",start:new Date("2024-05-20T17:00"),end:new Date("2024-05-20T18:00"),assignee:"Todd Hoffman",priority:"low",allDay:!1,repeat:!1,resourceId:2},{id:8,title:"Приготовить ужин",start:new Date("2024-05-20T18:00"),end:new Date("2024-05-20T21:50"),assignee:"Amanda Johnson",priority:"medium",allDay:!1,repeat:!1,resourceId:3}],Agenda_stories={title:"Example/Agenda",component:components_Agenda,tags:["autodocs"],parameters:{docs:{page:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(blocks_dist.hE,{}),(0,jsx_runtime.jsx)(blocks_dist.VY,{}),(0,jsx_runtime.jsx)(blocks_dist.Hl,{of:Functions}),(0,jsx_runtime.jsx)(blocks_dist.ov,{})]})}},argTypes:{onEventClick:{type:"function",description:"Срабатывает при клике по ивенту",control:"-"},onRangeChange:{type:"function",description:"Срабатывает при изменении диапазона дат",control:"-"},onTodayClick:{type:"function",description:"Срабатывает при переводе календаря на текущую дату",control:"-"},onEventUpdate:{type:"function",description:"Срабатывает при обновлении ивента",control:"-"}}},Basic={args:{events:agendaEvents}},Functions={args:{events:agendaEvents,onEventClick:(0,dist.fn)(),onRangeChange:(0,dist.fn)(),onTodayClick:(0,dist.fn)(),onEventUpdate:(0,dist.fn)()}};Basic.parameters={...Basic.parameters,docs:{...Basic.parameters?.docs,source:{originalSource:"{\n  args: {\n    events: agendaEvents\n  }\n}",...Basic.parameters?.docs?.source}}},Functions.parameters={...Functions.parameters,docs:{...Functions.parameters?.docs,source:{originalSource:"{\n  args: {\n    events: agendaEvents,\n    onEventClick: fn(),\n    onRangeChange: fn(),\n    onTodayClick: fn(),\n    onEventUpdate: fn()\n  }\n}",...Functions.parameters?.docs?.source}}};const __namedExportsOrder=["Basic","Functions"]},"./src/components/Agenda/Modal/modal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>Modal});__webpack_require__("./node_modules/react/index.js");const modal_module={modalPositionWrapper:"modal_modalPositionWrapper__7zQ0n",modalWrapper:"modal_modalWrapper__bww-K",infoWrapper:"modal_infoWrapper__FvIdR",repeatWrapper:"modal_repeatWrapper__lgjDl",titleWrapper:"modal_titleWrapper__kDsup",titleInput:"modal_titleInput__osXwF",container:"modal_container__wP0zm",containerRepeat:"modal_containerRepeat__2J+N0",containerRadio:"modal_containerRadio__DJchc",checkboxItem:"modal_checkboxItem__7-UN1",buttonsWrapper:"modal_buttonsWrapper__rh5Tj",button:"modal_button__aeZgl",selectOption:"modal_selectOption__lHdEl",text:"modal_text__IJnLn",textHeader:"modal_textHeader__ILmpc",inputNumber:"modal_inputNumber__9NEi6"};var moment=__webpack_require__("./node_modules/moment/moment.js"),moment_default=__webpack_require__.n(moment),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const priorities=[{high:"Высокий"},{medium:"Средний"},{low:"Низкий"}],Modal=_ref=>{let{cancelButtonHandler,isShowModal,event,changeEventHandler,updateEventHandler,modalView,resources}=_ref;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:isShowModal?(0,jsx_runtime.jsx)("div",{className:modal_module.modalPositionWrapper,onClick:()=>cancelButtonHandler(),children:(0,jsx_runtime.jsx)("div",{className:modal_module.modalWrapper,onClick:e=>e.stopPropagation(),children:(0,jsx_runtime.jsxs)("div",{className:modal_module.infoWrapper,children:[(0,jsx_runtime.jsxs)("div",{className:modal_module.titleWrapper,children:[(0,jsx_runtime.jsx)("div",{className:modal_module.text,children:"Title"}),(0,jsx_runtime.jsx)("input",{className:modal_module.titleInput,placeholder:"Title",value:event.title,onChange:e=>{changeEventHandler(e.target.value,"title")}})]}),(0,jsx_runtime.jsxs)("div",{className:modal_module.container,children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:modal_module.text,children:"Start Date"}),(0,jsx_runtime.jsx)("input",{type:"datetime-local",defaultValue:moment_default()(event.start).format("YYYY-MM-DDTHH:mm"),onChange:e=>{changeEventHandler(e.target.value,"start")}})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:modal_module.text,children:"End Date"}),(0,jsx_runtime.jsx)("input",{type:"datetime-local",defaultValue:moment_default()(event.end).format("YYYY-MM-DDTHH:mm"),onChange:e=>{changeEventHandler(e.target.value,"end")}})]})]}),(0,jsx_runtime.jsx)("div",{className:modal_module.container,children:(0,jsx_runtime.jsxs)("div",{className:modal_module.checkboxItem,children:[(0,jsx_runtime.jsx)("input",{type:"checkbox",defaultChecked:event.allDay,onChange:e=>{changeEventHandler(e.target.checked,"allDay")}}),(0,jsx_runtime.jsx)("div",{className:modal_module.text,children:"All day"})]})}),(0,jsx_runtime.jsxs)("div",{className:modal_module.container,children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:modal_module.text,children:"Assignee"}),(0,jsx_runtime.jsx)("input",{placeholder:"Assignee",value:event.assignee,onChange:e=>{changeEventHandler(e.target.value,"assignee")}})]}),"agenda"===modalView?(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:modal_module.text,children:"Priority"}),(0,jsx_runtime.jsx)("select",{className:modal_module.select,onChange:e=>{changeEventHandler(e.target.value,"priority")},value:event.priority,children:priorities.map(((priority,i)=>(0,jsx_runtime.jsx)("option",{className:modal_module.selectOption,value:Object.keys(priority),children:Object.values(priority)})))})]}):null,"Timeline"===modalView?(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:modal_module.text,children:"Resource"}),(0,jsx_runtime.jsx)("select",{className:modal_module.select,onChange:e=>{changeEventHandler(resources.find((resource=>resource.resource==e.target.value)).id,"resourceId")},defaultValue:resources.find((resource=>resource.id==event.resourceId)).resource,children:resources.map(((resource,i)=>(0,jsx_runtime.jsx)("option",{className:modal_module.selectOption,value:resource.resource,children:resource.resource})))})]}):null]}),(0,jsx_runtime.jsxs)("div",{className:modal_module.buttonsWrapper,children:[(0,jsx_runtime.jsx)("button",{className:modal_module.button,onClick:()=>updateEventHandler(),children:"DONE"}),(0,jsx_runtime.jsx)("button",{className:modal_module.button,onClick:()=>cancelButtonHandler(),children:"CANCEL"})]})]})})}):null})};Modal.__docgenInfo={description:"",methods:[],displayName:"Modal"}},"./src/utils/helpers.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Fw:()=>isWeekContainEvent,Ui:()=>isSelectedMonth,YR:()=>isDayContainCurrentTimestamp,qm:()=>isCurrentDay,rB:()=>isDayContainEvent});var moment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/moment/moment.js"),moment__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);const isCurrentDay=day=>moment__WEBPACK_IMPORTED_MODULE_0___default()().isSame(day,"day"),isSelectedMonth=(day,startingPointTime)=>startingPointTime.isSame(day,"month"),isDayContainCurrentTimestamp=(a,b)=>a.format("X")>=b.startOf("day").format("X")&&a.format("X")<b.clone().endOf("day").format("X"),isDayContainEvent=(event,dayItem)=>moment__WEBPACK_IMPORTED_MODULE_0___default()(event.start).format("X")>=moment__WEBPACK_IMPORTED_MODULE_0___default()(dayItem).startOf("day").format("X")&&moment__WEBPACK_IMPORTED_MODULE_0___default()(event.end).format("X")<moment__WEBPACK_IMPORTED_MODULE_0___default()(dayItem).clone().endOf("day").format("X"),isWeekContainEvent=(event,dayItem)=>moment__WEBPACK_IMPORTED_MODULE_0___default()(event.start).format("X")>=moment__WEBPACK_IMPORTED_MODULE_0___default()(dayItem).clone().startOf("week").add(1,"day").format("X")&&moment__WEBPACK_IMPORTED_MODULE_0___default()(event.end).format("X")<moment__WEBPACK_IMPORTED_MODULE_0___default()(dayItem).clone().endOf("week").add(1,"day").format("X")},"./node_modules/memoizerific sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/memoizerific sync recursive",module.exports=webpackEmptyContext}}]);